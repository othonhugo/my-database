# Fase 3: Gerenciamento de Log e Compactação

Esta fase foca na manutenção do espaço em disco e na otimização do tempo de inicialização.

## Issue 3.1: Implementar Segmentação de Arquivos de Log

Evoluir de um único arquivo de log para múltiplos segmentos, com um segmento "ativo" para escritas e segmentos "imutáveis" mais antigos.

- [ ] Definir um tamanho máximo de segmento configurável.
- [ ] Modificar a lógica de escrita para criar um novo segmento ativo quando o atual atinge o limite.
- [ ] Atualizar a lógica de reconstrução do índice para carregar múltiplos segmentos em ordem.
- [ ] Adaptar o `Index` para armazenar também o ID do segmento junto com o offset.

## Issue 3.2: Implementar Processo de Compactação (Merge)

Criar o mecanismo que lê segmentos imutáveis, descarta dados obsoletos e escreve apenas os dados ativos em novos segmentos compactados.

- [ ] Implementar um método `compact()`.
- [ ] A lógica deve ler os dados ativos dos segmentos antigos e escrevê-los em novos segmentos.
- [ ] Um novo índice deve ser construído durante o processo.
- [ ] Implementar a "troca atômica" para substituir os arquivos e o índice antigos pelos novos de forma segura.
- [ ] Excluir os segmentos de log antigos após a compactação bem-sucedida.
